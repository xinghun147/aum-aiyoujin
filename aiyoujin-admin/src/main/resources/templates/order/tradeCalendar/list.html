<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8"/>
	<title>交易日历列表--layui后台管理模板</title>
	<link rel="stylesheet" type="text/css" th:href="@{/layui/css/layui.css}" media="all" />
	<link rel="stylesheet" type="text/css" th:href="@{/css/news.css}" media="all" />
	<style>
		.layui-upload-img{width: 92px; height: 92px; margin: 0 10px 10px 0;}
		/*列表table*/
		.list-table{width: 100%; margin: 10px 0;}
		.list-table thead{background-color:#f2f2f2; }
		.list-table tr{transition: all 0.3s;
			-moz-transition: all 0.3s; /* Firefox 4 */
			-webkit-transition: all 0.3s; /* Safari 和 Chrome */
			-o-transition: all 0.3s; /* Opera */}
		.list-table tr:nth-child(even){background: #fbfbfb;}
		.list-table tr:hover{background-color:#f8f8f8;}
		.list-table th{height: 24px}
		.list-table .can_click a{text-decoration: underline;}
		.list-table .can_click a:hover{color:#009688;}
		.list-table th,
		.list-table td{padding: 6px 15px;line-height: 20px;border:1px solid #ddd;font-size: 14px;font-weight: 400;}
		.list-table td .layui-input{height: 30px;line-height: 30px}
		.list-table td .thumb{cursor:pointer;position: relative;width:16px;height: 16px;}
		.list-table td .thumb .thumb-show{position: absolute;left:30px;bottom:-13px;z-index: 10;max-height:150px;max-width: 300px; border:1px solid #009688;background-image: url(../images/touming_bg.png);}
		.list-table td .link{cursor:pointer;}
		.list-table td .list-title:hover{color:#009688;}
		.list-table td .list-switch{font-size: 24px;font-weight: bold;color:#009688;}
		.list-table td .list-switch-off{font-size: 24px;font-weight: bold;color:#f00;}
	</style>
</head>
<body class="childrenBody">
	<blockquote class="layui-elem-quote news_search">
	<form id="searchForm" name="searchForm" class="layui-form" action="/order/tradeCalendar/list.html">
		<input type="hidden" id="pageNum" name="pageNum" th:value="${page.pageNum}"/>
		<div class="layui-form-item">
			<label class="layui-form-label">日期类型:</label>
			<div class="layui-input-inline">
				<select name="type" id="type" >
					  	<option value="">请选择日期类型</option>
					  	<option value="1" th:selected="${vo.type == 1}">按星期</option>
					  	<option value="2" th:selected="${vo.type == 2}">按日期</option>
					</select>
			</div>
			<label class="layui-form-label">涉及业务:</label>
			<div class="layui-input-inline">
				<select name="bizCode" id="bizCode" lay-filter="statusFilter">
					  	<option value="">请选择业务</option>
					  	<option value="DBUY" th:selected="${vo.bizCode == 'DBUY'}">活期金买入</option>
					  	<option value="DSELL" th:selected="${vo.bizCode == 'DSELL'}">活期金卖出</option>
					  	<option value="REGULAR" th:selected="${vo.bizCode == 'REGULAR'}">定投</option>
					  	<option value="RECYCLE" th:selected="${vo.bizCode == 'RECYCLE'}">存金</option>
					 	<option value="PHYSICAL" th:selected="${vo.bizCode == 'PHYSICAL'}">提金</option>
					 	<option value="REGULAR" th:selected="${vo.bizCode == 'REGULAR'}">定期</option>
					 	<option value="INCOME" th:selected="${vo.bizCode == 'INCOME'}">生息</option>
					 	<option value="AWARD" th:selected="${vo.bizCode == 'AWARD'}">任务奖励</option>
					 	<option value="PENDBUY" th:selected="${vo.bizCode == 'PENDBUY'}">挂单买入</option>
					 	<option value="PENDSELL" th:selected="${vo.bizCode == 'PENDSELL'}">挂单卖出</option>
					 	<option value="RECHARGE" th:selected="${vo.bizCode == 'RECHARGE'}">充值</option>
					 	<option value="WITHDRAW" th:selected="${vo.bizCode == 'WITHDRAW'}">提现</option>
				</select>
			</div>
			<!-- <button class="layui-btn search_btn"><i class="layui-icon">&#xe615;</i>查询</button> -->
			<a class="layui-btn layui-btn-normal newsAdd_btn" id="add"><i class="layui-icon">&#xe608;</i>添加</a>
		</div>
	</form>
	</blockquote>
	<div class="layui-form news_list">
	  	<table class="layui-table">
		    <thead>
				<tr>
					<th>日历类型</th>
					<th>日期开始</th>
					<th>日期结束</th>
					<th>周开始</th>
					<th>周结束</th>
					<th>小时开始</th>
					<th>小时结束</th>
					<th style="width:10%">涉及业务</th>
					<th>备注</th>
					<th>创建者</th>
					<th>创建时间</th>
					<th>更新者</th>
					<th>更新时间</th>
					<th>操作</th>
				</tr> 
		    </thead>
		    <tbody class="news_content">
		  	  <th:block th:if="${not #lists.isEmpty(page.list)}">
			    	<tr th:each="item:${page.list}">
				    	<th:block th:switch="${item.type}">
							<td  th:case="1">按星期</td>
							<td  th:case="2">按日期</td>
							<td  th:case="*">未知类型</td>
						</th:block>
						<td  th:text="${item.startDate}?${#dates.format(item.startDate,'yyyy-MM-dd')}"></td>
						<td  th:text="${item.endDate}?${#dates.format(item.endDate,'yyyy-MM-dd')}"></td>
						<th:block th:switch="${item.startWeekDay}">
							<td  th:case="1">周一</td>
							<td  th:case="2">周二</td>
							<td  th:case="3">周三</td>
							<td  th:case="4">周四</td>
							<td  th:case="5">周五</td>
							<td  th:case="6">周六</td>
							<td  th:case="7">周日</td>
							<td  th:case="*"></td>
						</th:block>
						<th:block th:switch="${item.endWeekDay}">
							<td  th:case="1">周一</td>
							<td  th:case="2">周二</td>
							<td  th:case="3">周三</td>
							<td  th:case="4">周四</td>
							<td  th:case="5">周五</td>
							<td  th:case="6">周六</td>
							<td  th:case="7">周日</td>
							<td  th:case="*"></td>
						</th:block>
						<td  th:text="${item.startTime}?${#dates.format(item.startTime,'HH:mm:ss')}"></td>
						<td  th:text="${item.endTime}?${#dates.format(item.endTime,'HH:mm:ss')}"></td>
						<td  th:text="${item.closedItems}"></td>
						<td  th:text="${item.remark}"></td>
						<td  th:text="${item.createBy}"></td>
						<td  th:text="${#dates.format(item.createTime,'yyyy-MM-dd HH:mm:ss')}"></td>
						<td  th:text="${item.updateBy}"></td>
						<td  th:text="${#dates.format(item.updateTime,'yyyy-MM-dd HH:mm:ss')}"></td>
				    	<td>
                            <!-- <a th:data="${item.id}"  class="layui-btn layui-btn-mini physical_info">查看</a> -->
					    	<!-- <a th:data="${item.id}"  class="layui-btn layui-btn-mini edit">编辑</a> -->
							<a th:data="${item.id}"  class="layui-btn layui-btn-danger layui-btn-mini del">删除</a>
						</td>
					</tr>
				</th:block>
		    </tbody>
		</table>
	</div>
	<div id="paged" align="right"></div>
	<script type="text/javascript" th:src="@{/layui/layui.js}"></script>
	<script type="text/javascript" th:src="@{/jquery/jquery-3.2.1.min.js}"></script>
	</body>
	<script th:inline="javascript">
         layui.use('laypage', function(){
        	  var laypage = layui.laypage;
        	  //执行一个laypage实例
        	  laypage.render({
        	    elem: 'paged', //注意，这里的 test1 是 ID，不用加 # 号
        	    curr: [[${page.pageNum}]],
        	    count: [[${page.total}]], //数据总数，从服务端得到
        	    layout: ['count', 'prev', 'page', 'next'],
                jump: function(obj, first){
                    //得到了当前页，用于向服务端请求对应数据
                    var curr = obj.curr;
                    $("#pageNum").val(curr);
                    if(!first) {
                        $("#searchForm").submit();
					}
                }
        	  });
        	});
        
        layui.use('layer',function(){
            var layer = layui.layer,$=layui.jquery;
            //删除
            $(".del").bind("click",function() {
                var id = $(this).attr("data");
                layer.confirm('确定要删除吗?', {icon: 3, title:'提示'}, function(index){
                	  location.href="del.html?id="+id;
                });
            });

			//查看
            $(".physical_info").bind("click",function() {
                var id = $(this).attr("data");
                //Ajax获取
            	$.post('infoView.html', {id:id}, function(data){
            	  	layer.open({
            	  	  type: 1,
              		  title: "查看交易日历"
              		  ,area: ['920px', '460px']
              		  ,shade: 0
              		  ,content: data
           			  ,yes: function(index, layero){
           				  layer.close(index);
           				}
              		}); 
            	}); 
            });

            //编辑
            $(".physical_edit").bind("click",function() {
                var id = $(this).attr("data");
                //Ajax获取
            	form_html(id,'编辑交易日历');
            });

            /**
			 * 添加
             */
            $("#add").bind("click",function() {
            	//Ajax获取
            	form_html("",'添加交易日历','800px','500px');
            });
            
             function form_html(id,title,width,high){
              	$.post('addView.html', {id:id}, function(data){
            	  	layer.open({
            	  	  type: 1,
              		  title: title
              		  ,area: [width,high]
              		  ,shade: 0
              		  ,content: data
           			  ,yes: function(index, layero){
           				  layer.close(index);
           				}
              		}); 
            	}); 
            };

			function form_state_html(id){
				$.post('productPhysicalStatusView.html', {id:id}, function(data){
					layer.open({
						type: 1,
						title:'添加开售时间'
						,area: ['420px', '320px']
						,shade: 0
						,content: data
						,yes: function(index, layero){
							layer.close(index);
						}
					});
				});
			};
        });
        
        layui.use('form', function(){
            var form = layui.form;
            form.render();
        });
     
        
        layui.use('laydate', function(){
        	  var laydate = layui.laydate;
        	  //执行一个laydate实例
        	  laydate.render({
        	    elem: '#startTime' //指定元素
        	  });
        	  //执行一个laydate实例
        	  laydate.render({
        	    elem: '#endTime' //指定元素
        	  });
        	});
	</script>
</html>